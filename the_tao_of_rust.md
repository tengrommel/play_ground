# 第一章 新时代的语言

## 1.2 设计哲学

- 内存安全
- 零成本抽象
- 实用性

### 1.2.1 内存安全

类型系统提供了以下好处：

- 允许编译器侦测无意义甚至无效的代码，暴露程序中隐含的错误
- 可以为编译器提供有意义的类型信息，帮助优化代码
- 可以增强代码的可读性，更直白地阐述开发者的意图
- 提供了一定程度的高级抽象，提升开发效率

与haskell的不同

- Haskell是一门纯函数式编程语言，它的类型系统主要用于承载其"纯函数式"的思想，是范畴论的体现
- 而对Rust来说，它的类型系统要承载其"内存安全"的思想。所以还需要有一个安全内存管理模型，并通过类型系统表达出来，才能保证内存安全

内存安全 -> 不会出现内存访问错误

常见的内存错误
- 引用空指针
- 使用未初始化内存
- 释放后使用，也就是使用悬垂指针
- 缓冲区溢出，比如数组越界
- 非法释放已释放过的指针或未分配的指针，也就是重复释放

内存管理模型

- 所有权系统
> 每个被分配的内存都有一个独占其所有权的指针。只有当该指针被销毁时，其对应的内存才能随之被释放。
- 借用和生命周期
> 每个变量都有其生命周期，一旦超出生命周期，变量就会被自动释放。如果是借用，则可以通过标记生命周期参数供编译器检查的方式，防止出现悬垂指针，也就是释放后使用的情况。